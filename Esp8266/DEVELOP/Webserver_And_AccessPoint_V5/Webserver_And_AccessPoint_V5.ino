#include <IPAddress.h>
#include <ESP8266WiFi.h>
#include <ESP8266WebServer.h>
#include <ESP8266HTTPClient.h>

ESP8266WebServer server(80);
////////////////////////////////////////////////////////////////////////////////////
void Desktop() {
  server.send(200, "text/html", "<h1>You are connected</h1>");
}
////////////////////////////////////////////////////////////////////////////////////
String LayChuoiJson()
{
        HTTPClient http;
        String payload = "";
        String SVLink = "http://fablabs.store/cttm/data/12345678abcdefgh.txt" ;//+ SVID ;
        //String SVLink = "http://192.168.1.4:8080/homegreen/data/?utsid=" + SVID + "&utsvalue=" + ChuoiDuLieuMCU;
        http.begin(SVLink); //HTTP
        uint8_t httpCode = http.GET();
        if(httpCode > 0) 
        {
            if(httpCode == HTTP_CODE_OK){  payload = http.getString();  }
        } 
        http.end();
        //////////
        return payload;
}
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
  const char *ssid      = "Tag4yu";
  const char *password  = "0918180212";
  IPAddress Subnet      = IPAddress(255,255,255,0);
  IPAddress APlocalIP   = IPAddress(192,168,10,1);
  const char *assid     = "DMT Company";
  const char *apassword = "12345678";
////////////////////////////////////////////////////////////////////////////////////
void setup() {
  Serial.begin(9600);
  delay(100);
  WiFi.mode(WIFI_AP_STA);  // WIFI_AP
  ////////////////////////////////////////
  WiFi.begin(ssid, password);
  delay(3000);
  ////////////////////////////////////////
  WiFi.softAPConfig( APlocalIP, APlocalIP, Subnet);
  WiFi.softAP(assid, apassword);
  delay(1000);
  //////////////////////////////
  server.on("/", Desktop);
  server.begin();
  delay(2000);
  //////////////////////////////
}
////////////////////////////////////////////////////////////////////////////////////
void loop() 
{
  server.handleClient();
  delay(1000);
  ////////////////////////////
  //////////////////////////////
}
